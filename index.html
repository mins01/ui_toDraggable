<!doctype html>
<html lang="ko" >
<head>
	<title>toDraggable</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	
	<!-- jquery 관련 -->
	<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"></script>   -->
	
	
	<!-- 부트스트랩 4 : IE8지원안됨! -->
	<!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">  -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>  -->
	<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" crossorigin="anonymous"></script> -->
	<!-- vue.js -->
	<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
	
	<!-- meta og -->
	
	<meta property="og:title" content="inputRangeBox">
	<meta property="og:description" content="inputRangeBox">
	<meta name="og:image" content="http://www.mins01.com/img/logo.gif">
	<meta property="og:image:width" content="190">
	<meta property="og:image:height" content="70" />
	<meta property="og:site_name" content="inputRangeBox" />
	<meta property="og:type" content="website">
	
	<!-- //meta og -->
	
	
	<link rel="stylesheet" href="toDraggable.css"> 
	<script src="toDraggable.js"></script>
	
	<script>
	
	var cb_onpointerdown = function(evt,gapX,gapY,target,data){
		toDraggable.cb_onpointerdown(evt,gapX,gapY,target,data)
		target.classList.add('toDraggable-pointer-events-none');
		target.setAttribute("data-on","1");
	}
	var cb_onpointermove = function(evt,gapX,gapY,target,data){
		toDraggable.cb_onpointermove(evt,gapX,gapY,target,data)
		// console.log(evt.type,gapX,gapY,data)
		target.setAttribute("data-on","2");
	}
	var cb_onpointerup = function(evt,target,data){
		
		var hovers = document.querySelectorAll('.toDraggable-hover'); //target.classList.add('toDraggable-pointer-events-none'); 가 있어야만 동작한다.
		if(hovers[0]) hovers[0].innerText += 'Selected target'
		
		target.classList.remove('toDraggable-pointer-events-none');
		toDraggable.cb_onpointerup(evt,target,data)
		// console.log(evt.type,data)
		target.setAttribute("data-on","0");	
	}
	
	window.addEventListener("load",function(evt){
		var boxes1 = document.querySelectorAll('.box1');
		for(var i=0,m=boxes1.length;i<m;i++){
			boxes1[i].toDraggableCtrl = toDraggable(boxes1[i],
				toDraggable.cb_onpointerdown,
				toDraggable.cb_onpointermove,
				toDraggable.cb_onpointerup);
			}
			var boxes2 = document.querySelectorAll('.box2');
			for(var i=0,m=boxes2.length;i<m;i++){
				boxes2[i].toDraggableCtrl = toDraggable(boxes2[i],
					cb_onpointerdown,
					cb_onpointermove,
					cb_onpointerup);
				}
			}
		)
		</script>
		<style>
		*{box-sizing: border-box;}
		.box{width: 100px; height:100px;border:3px solid #abc; background-color: rgba(100,200,50,0.3); position: absolute;}
		.box[data-on="1"]{border-color:red;}
		.box[data-on="2"]{border-color:blue;}
		</style>
	</head>
	<body>
		<div class="container">
			<h1>toDraggable</h1>
			<ul>
				<li>html_node의 드래그 이벤트 제어를 할 수 있게 해준다.</li>
			</ul>
			<h2>function</h2>
			<ul>
				<li>toDraggableCtrl = toDraggable(target,cb_onpointerdown,cb_onpointermove,cb_onpointerup) //target에 드래그 이벤트 설정</li>
				
			</ul>
			<h2>method</h2>
			<ul>
				<li>toDraggableCtrl.enable() //드래그 이벤트 동작</li>
				<li>toDraggableCtrl.disable() //드래그 이벤트 중지</li>
				<li>toDraggable.cb_onpointerdown(evt,gapX,gapY,target,data) //top과 left를 이동시키는 이벤트 기본형 pointerdown 콜백 함수
					<ul>
						<li>evt : 이벤트</li>
						<li>x,y : 현재 left,top 위치</li>
						<li>target : toDraggable 처리된 html_node (evt.target 과 다를 수 있다!)</li>
						<li>data : ing(진행여부),x(현재x 좌표),y(현재y좌표) 정보 제공</li>
					</ul>
				</li>
				<li>toDraggable.cb_onpointermove(evt,gapX,gapY,target,data) //top과 left를 이동시키는 이벤트 기본형 pointermove 콜백 함수
					<ul>
						<li>evt : 이벤트</li>
						<li>gapX,gapY : 이동 차이 left,top</li>
						<li>target : toDraggable 처리된 html_node </li>
						<li>data : ing(진행여부),x(현재x 좌표),y(현재y좌표) 정보 제공</li>
					</ul>
				</li>
				<li>toDraggable.cb_onpointerup(evt,target,data) //top과 left를 이동시키는 이벤트 기본형 pointerup 콜백 함수
					<ul>
						<li>evt : 이벤트</li>
						<li>target : toDraggable 처리된 html_node (evt.target 과 다를 수 있다!)</li>
						<li>data : ing(진행여부),x(현재x 좌표),y(현재y좌표) 정보 제공</li>
					</ul>
				</li>
			</ul>
			<h2>example</h2>
			<div>
				#Control
				<ol>
					<li>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(1)').toDraggableCtrl.enable()" >enable</button>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(1)').toDraggableCtrl.disable()" >disable</button>	
					</li>
					<li>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(2)').toDraggableCtrl.enable()" >enable</button>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(2)').toDraggableCtrl.disable()" >disable</button>	
					</li>
					<li>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(3)').toDraggableCtrl.enable()" >enable</button>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(3)').toDraggableCtrl.disable()" >disable</button>	
					</li>
					<li>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(4)').toDraggableCtrl.enable()" >enable</button>
						<button onclick="document.querySelector('.toDraggable-box:nth-of-type(4)').toDraggableCtrl.disable()" >disable</button>	
					</li>
				</ol>
			</div>
			<div style="position:relative; height:300px; background-color:#efefef;">
				<div class="box box1 toDraggable-box toDraggable-with-icon" style="top:0px;left:0px;">1
					<button type="button">button</button>
				</div>
				<div class="box box1 toDraggable-box" style="top:0px;left:200px;">2
					<button type="button">button</button>
				</div>
				<div class="box box2 toDraggable-box" style="top:200px;left:0px;">3
					<button type="button">button</button>
				</div>
				<div class="box box2 toDraggable-box" style="top:200px;left:200px;">4
					<button type="button">button</button>
				</div>
			</div>
		</div>
		<br />
		<br />
		<br />
		<br />
	</body>
	</html>